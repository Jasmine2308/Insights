# Virtual Hosts
#
# Required modules: mod_log_config

# If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at
# <URL:http://httpd.apache.org/docs/2.4/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#

<VirtualHost _default_:80>
    DocumentRoot "/usr/share/httpd/noindex"
    ServerName localhost
    <IfModule mod_proxy_ajp.c>
      ProxyRequests Off
      ProxyTimeout 300
      ProxyPreserveHost On
      ProxyVia On

      <Proxy balancer://grafanaHome>
        BalancerMember http://localhost:3000 route=route1
        ProxySet lbmethod=bybusyness
      </Proxy>
      <Location /grafana>
        Order allow,deny
        Allow from all
        ProxyPass balancer://grafanaHome stickysession=JSESSIONID
      </Location>


      <Proxy balancer://rabbitMqHome>
        BalancerMember http://localhost:15672 route=route1
        ProxySet lbmethod=bybusyness
      </Proxy>
      AllowEncodedSlashes NoDecode 
      <Location /mq>
        Order allow,deny
        Allow from all
        ProxyPass balancer://rabbitMqHome stickysession=JSESSIONID
      </Location>


    <Proxy balancer://rabbitMqDataHome>
        BalancerMember http://localhost:5672 route=route1
        ProxySet lbmethod=bybusyness
      </Proxy>
      <Location /mqdata>
        Order allow,deny
        Allow from all
        ProxyPass balancer://rabbitMqDataHome stickysession=JSESSIONID
      </Location>

      <Proxy balancer://OneDevOpsHome>
        BalancerMember http://localhost:8080/app route=route1
        ProxySet lbmethod=bybusyness
      </Proxy>
      <Location /app>
        Order allow,deny
        Allow from all
        ProxyPass balancer://OneDevOpsHome stickysession=JSESSIONID
      </Location>

      ProxyPass "/PlatformService/"  "http://localhost:8080/PlatformService/"
      ProxyPass "/google/"  "http://localhost:8080"

    </IfModule>
</VirtualHost>
